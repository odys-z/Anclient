

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>About Anclient &mdash; Anclient Anclient documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Anclient Anclient documentation" href="../index.html"/>
        <link rel="next" title="Application Framework" href="framework.html"/>
        <link rel="prev" title="About JSample" href="jsample.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Anclient
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="jsample.html">About JSample</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsample.html#jsample-quick-start">JSample Quick Start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">About Anclient</a></li>
<li class="toctree-l1"><a class="reference internal" href="#js-quick-start">JS Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#start-with-the-basic-api">Start with the basic API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-xvisual">Example: xvisual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="framework.html">Application Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/docker.html">Play with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">For developers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Anclient</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>About Anclient</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/starter/client.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about-anclient">
<h1>About Anclient<a class="headerlink" href="#about-anclient" title="Permalink to this headline">¶</a></h1>
<p>Anclient is the client side API for semantic-jserv service like JSample, which
including:</p>
<ul class="simple">
<li>anclient.java,</li>
</ul>
<p>the java client.</p>
<ul class="simple">
<li>anclient.js,</li>
</ul>
<p>the low level js client API for accessing service at jerver.sample.</p>
<p>It’s for other presentation tier extension, such as HandsonTable, which is also
been used in commercial project. All the clients are tested together with
jserv.sample (All? Not True) and can be configured to a different jserv service.</p>
<ul class="simple">
<li>anclient.js.easui,</li>
</ul>
<p>the <a class="reference external" href="https://www.jeasyui.com/index.php">JQuery EasyUI</a> API lib that take care
of communicating with semantic-*, binding UI widgets, based on anclient.js.</p>
<p>The EasyUI version is implemented as a basic enterprise webapp’s client, including
a role based function privilege management and a cheap workflow extension. It’s
a good starting point for a commercial webapp.</p>
<ul class="simple">
<li>anclient.cs,</li>
</ul>
<p>the planned c# client.</p>
<ul class="simple">
<li>anclient.js.vue,</li>
</ul>
<p>the planned vue components can communicate with sematic-*, based on anclient.js.</p>
<p>The sample project’s client side located in the anclient/test folder.</p>
</div>
<div class="section" id="js-quick-start">
<span id="anclient-quickstart-js"></span><h1>JS Quick Start<a class="headerlink" href="#js-quick-start" title="Permalink to this headline">¶</a></h1>
<div class="section" id="start-with-the-basic-api">
<h2>Start with the basic API<a class="headerlink" href="#start-with-the-basic-api" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Deploy a web application of Semantic-jserv</li>
</ol>
<p>Say, <a class="reference internal" href="jsample.html#jsample-quick-start"><span class="std std-ref">jsample</span></a>.</p>
<ol class="arabic simple" start="2">
<li>Install Anclient.</li>
</ol>
<p>It’s a npm package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">dev</span> <span class="n">anclient</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Create a client</li>
</ol>
<p>The client is based upon the plain js API.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// initialize a client of jsample</span>
<span class="kd">var</span> <span class="nx">$J</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">$J</span><span class="p">();</span>
<span class="nx">$J</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;http://127.0.0.1:8080/jsample&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">ssClient</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">login</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$J</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="c1">// user name</span>
        <span class="s2">&quot;&quot;</span><span class="p">,</span>      <span class="c1">// password (won&#39;t sent on line - already set at server)</span>
        <span class="c1">// callback parameter is a session client initialized with session token</span>
        <span class="c1">// client.ssInf has session Id, token &amp; user information got from server</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">client</span><span class="p">){</span>
            <span class="nx">ssClient</span> <span class="o">=</span> <span class="nx">client</span><span class="p">;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ssClient</span><span class="p">.</span><span class="nx">ssInf</span><span class="p">);</span>
            <span class="nx">query</span><span class="p">();</span>
        <span class="p">});</span>
<span class="p">}</span>

<span class="cm">/** Create a query request and post back to server. */</span>
<span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">ssClient</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">conn</span><span class="p">,</span> <span class="s2">&quot;a_user&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">page</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="p">});</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">.</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">,</span> <span class="s2">&quot;un&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;userId&quot;</span><span class="p">,</span> <span class="s2">&quot;uid&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;roleName&quot;</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">j</span><span class="p">(</span><span class="s2">&quot;a_roles&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;u.roleId = r.roleId&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">whereCond</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;u.userId&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;admin&#39;&quot;</span><span class="p">);</span>

    <span class="nx">$J</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span>
        <span class="c1">// success callback. resp is a server message</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It’s doing 3 things:</p>
<ol class="arabic simple">
<li>create a client of jsample</li>
<li>login with the user’s login name and password</li>
</ol>
<p>The session is managed by Semantic.jserv and Anclient together. Each user’s action
will touch the time stamp at jserv’s session information. If user stop action for
a time (configured at server side), the session will expired</p>
<ol class="arabic simple" start="3">
<li>query the user’s basic information (role)</li>
</ol>
<p>The query is a simple SQL example. It’s wrapped by upper widget binding layer to
produce automatic data bindings.</p>
</div>
<div class="section" id="example-xvisual">
<h2>Example: xvisual<a class="headerlink" href="#example-xvisual" title="Permalink to this headline">¶</a></h2>
<p>Copy the released template project form the <a class="reference external" href="https://github.com/odys-z/Anclient/releases/">release section</a>.</p>
<p>Anclient has multiple samples (in the future) sharing node’s modules. You can also
install those like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-+-</span> <span class="n">examples</span><span class="o">.</span><span class="n">js</span>
 <span class="o">|---</span> <span class="n">xvisual</span>
 <span class="o">|---</span> <span class="n">sampel</span><span class="o">-</span><span class="n">TODO</span>
</pre></div>
</div>
<p>To install dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">examples</span><span class="o">.</span><span class="n">js</span>
<span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>If everything is OK, following dependencies should be installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">babel</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">syntax</span><span class="o">-</span><span class="n">jsx</span> <span class="n">babel</span><span class="o">-</span><span class="n">preset</span><span class="o">-</span><span class="n">env</span>
<span class="n">jquery</span>
<span class="n">d3</span> <span class="n">earcut</span> <span class="n">oboe</span>
<span class="n">anclient</span>
<span class="n">x</span><span class="o">-</span><span class="n">visual</span><span class="o">@</span><span class="mf">0.3</span><span class="o">.</span><span class="mi">81</span>
</pre></div>
</div>
<p><strong>Note:</strong> This example depends on x-visual webgl1 branch, version 0.3.81.</p>
<p>Install webpack for the sample project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">xvisual</span>
<span class="n">npm</span> <span class="n">init</span>
<span class="n">npm</span> <span class="n">install</span> <span class="n">webpack</span> <span class="n">webpack</span><span class="o">-</span><span class="n">cli</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>Then use webpack transpile the source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">webpack</span>
</pre></div>
</div>
<p>There are many way to host the index.html page, e.g. start a python server in
examples.js (index.html used 2 level parent path):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">http</span><span class="o">.</span><span class="n">server</span> <span class="mi">8080</span>
</pre></div>
</div>
<p>Then browse to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">xvisual</span><span class="o">/</span><span class="n">bar</span><span class="o">-</span><span class="n">chart</span><span class="o">/</span>
</pre></div>
</div>
<p>This example also will visiting the jserv-sample data service.
See <a class="reference internal" href="jsample.html#jsample-quick-start"><span class="std std-ref">JSample quick start</span></a> for how to setup it.</p>
<p>Comming with the jserv-sample project is a sqlit3 db file configured as
connection id = “raw-vec”. The database has a table named vector, with some data:</p>
<img alt="../_images/02-vectors.jpg" src="../_images/02-vectors.jpg" />
<p>The example/xvisual/app.js created the Anclient querying data from jseer-sample:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">req</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ssClient</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;raw-vec&quot;</span><span class="p">,</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">page</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="p">});</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">.</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;vid&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;val&quot;</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim1&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim2&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim3&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim4&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim5&quot;</span><span class="p">).</span><span class="nx">expr</span><span class="p">(</span><span class="s2">&quot;dim6&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">whereCond</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;vgroup&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;80-&#39;&quot;</span><span class="p">);</span>

<span class="k">this</span><span class="p">.</span><span class="nx">an</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">bar</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">vectors</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The examples/xvisual/bars.js will creating cubes with size of vector values. The
geometry parameters of bars are bound with vector data:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">create</span><span class="p">(</span><span class="nx">vectors</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">vectors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">vectors</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">amount</span> <span class="o">-</span> <span class="mi">95</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">ecs</span><span class="p">.</span><span class="nx">createEntity</span><span class="p">({</span>
            <span class="nx">id</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">vid</span><span class="p">,</span>
            <span class="nx">Obj3</span><span class="o">:</span> <span class="p">{</span> <span class="nx">geom</span><span class="o">:</span> <span class="nx">xv</span><span class="p">.</span><span class="nx">XComponent</span><span class="p">.</span><span class="nx">Obj3Type</span><span class="p">.</span><span class="nx">BOX</span><span class="p">,</span>
                    <span class="nx">box</span><span class="o">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
                    <span class="nx">transform</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span><span class="nx">translate</span><span class="o">:</span> <span class="p">[</span><span class="nx">i</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">-</span> <span class="mi">90</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">]}</span> <span class="p">]</span>
                <span class="p">},</span>
            <span class="nx">Visual</span><span class="o">:</span> <span class="p">{</span><span class="nx">vtype</span><span class="o">:</span> <span class="nx">xv</span><span class="p">.</span><span class="nx">AssetType</span><span class="p">.</span><span class="nx">mesh</span><span class="p">,</span>
                     <span class="nx">asset</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">person</span> <span class="o">===</span> <span class="s1">&#39;A2&#39;</span> <span class="o">?</span>
                             <span class="kc">undefined</span> <span class="o">:</span> <span class="s1">&#39;../../assets/tex/rgb2x2.png&#39;</span>
                 <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The final result should like this (of which two of the bars using a default
texture generated by x-visual):</p>
<img alt="../_images/02-vectors-bars.jpg" src="../_images/02-vectors-bars.jpg" />
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="framework.html" class="btn btn-neutral float-right" title="Application Framework" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jsample.html" class="btn btn-neutral" title="About JSample" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Odys Zhou.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'Anclient',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>